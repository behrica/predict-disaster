schema: '2.0'
stages:
  train:
    cmd: ./train.sh
    deps:
    - path: deps.edn
      md5: 58f797ea600cb657a1cb69c090cc8c0c
      size: 853
    - path: src/train.clj
      md5: aeadabcf0725be3e7a6f37bbf8fae030
      size: 2125
    - path: test.arrow
      md5: 044e70620365604959786ba2aebc9f96
      size: 428426
    - path: train.arrow
      md5: e17a0868efa512c21e2a8cc90da78b7d
      size: 849786
    params:
      params.yaml:
        train.model_name: google/electra-base-discriminator
        train.model_type: electra
        train.num_train_epochs: 3
        train.sliding_window: true
        train.train_batch_size: 32
    outs:
    - path: eval.json
      md5: 2570abba816c358e7039e68765c2775d
      size: 36
    - path: outputs
      md5: 8c0134f09a255c8665d13f7bcc62e816.dir
      size: 10958907484
      nfiles: 98
  preprcess:
    cmd: clj preprocess.clj
    outs:
    - path: test.arrow
      md5: 9ec7b20767104d5e5163dd1b0b9c8d3a
      size: 249602
    - path: train.arrow
      md5: d927714523a1e5bd60c8940199158497
      size: 578642
  preprocess:
    cmd: clojure -X preprocess/do-preprocess
    deps:
    - path: deps.edn
      md5: 58f797ea600cb657a1cb69c090cc8c0c
      size: 853
    - path: src/preprocess.clj
      md5: 1e2419c2ac24cc837caa23c19f832dac
      size: 954
    - path: test.csv
      md5: ff248529f207ea164d73636e5b1b251d
      size: 420783
    - path: train.csv
      md5: f147942c91d00d754503775341d13682
      size: 987712
    outs:
    - path: test.arrow
      md5: 044e70620365604959786ba2aebc9f96
      size: 428426
    - path: train.arrow
      md5: e17a0868efa512c21e2a8cc90da78b7d
      size: 849786
  predict_kaggle:
    cmd: clojure -A:add-foreign -X predict_kaggle/predict-kaggle
    deps:
    - path: deps.edn
      md5: 58f797ea600cb657a1cb69c090cc8c0c
      size: 853
    - path: outputs
      md5: 8c0134f09a255c8665d13f7bcc62e816.dir
      size: 10958907484
      nfiles: 98
    - path: src/predict_kaggle.clj
      md5: c1278d90c31ee86386a79ca2b733c47b
      size: 1224
    outs:
    - path: kaggle_submission.csv
      md5: 3e19d8118d24c9f7bb63fca5d331843d
      size: 22746
